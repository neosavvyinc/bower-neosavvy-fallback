/*! neosavvy-fallback - v0.0.1 - 2014-01-13
* Copyright (c) 2014 Neosavvy, Inc.; Licensed  */
!function(a,b,c){function d(a){return a&&a!==!1&&"0"!==a}function e(a){return a===!1||"false"===a||0===a||"0"===a}function f(a){for(var b in a)l["ALLOW_"+b]=null,l["MIN_"+b]=null,l["MAX_"+b]=null}function g(a){function b(a,b){for(;a.length<b;)a+="0";return a}function c(a,c){if(a===c)return!0;a=a.split("."),c=c.split(".");for(var d=0;d<Math.max(a.length,c.length);d++)if(0===d){if(parseInt(a[d])!==parseInt(c[d]))return parseInt(a[d])>parseInt(c[d])}else{if(!(a.length>d&&c.length>d))return a.length>d?!0:!1;var e=Math.max(a[d].length,c[d].length),f=parseInt(b(a[d],e)),g=parseInt(b(c[d],e));if(f!==g)return f>g}}a=String(a),this.isGreaterThanEqualTo=function(b){return c(a,String(b))},this.isLessThanEqualTo=function(b){return c(b,String(a))}}function h(a,f){for(var h=b.copy(l),i=0;i<a.attributes.length;i++){var j=a.attributes[i].name.replace(/-/g,"_").toUpperCase();void 0!==h[j]&&(h[j]=a.attributes[i].value)}var k=_.invert(c.Utils.BrowserUtils.CONSTANTS.BROWSER)[f.browser],m=_.invert(c.Utils.BrowserUtils.CONSTANTS.OS)[f.os];return d(h.DENY_ALL_BROWSERS_BY_DEFAULT)&&!d(h["ALLOW_"+k])||d(h.DENY_ALL_OS_BY_DEFAULT)&&!d(h["ALLOW_"+m])||e(h["ALLOW_"+k])||e(h["ALLOW_"+m])?!1:h["MIN_"+k]&&!new g(f.browserVersion).isGreaterThanEqualTo(h["MIN_"+k])||h["MAX_"+k]&&!new g(f.browserVersion).isLessThanEqualTo(h["MAX_"+k])||h["MIN_"+m]&&!new g(f.osVersion).isGreaterThanEqualTo(h["MIN_"+m])||h["MAX_"+m]&&!new g(f.osVersion).isLessThanEqualTo(h["MAX_"+m])?!1:!0}function i(a){b.element(document).ready(function(){b.bootstrap(a,[a.getAttribute("ns-fallback")])})}function j(a,b){if(a=$(a),a.attr("fallback-element")&&(a=$(a.find(a.attr("fallback-element"))[0])),0===a.length)throw"Fallback element not found in dom, check your specification!";a.empty(),a.attr("fallback-template")?$.get(a.attr("fallback-template")).done(function(d){a.append(d.replace(/{{browser}}/g,_.invert(c.Utils.BrowserUtils.CONSTANTS.BROWSER)[b.browser].toLowerCase().replace(/_/g," ")).replace(/{{browserVersion}}/g,b.browserVersion).replace(/{{os}}/g,_.invert(c.Utils.BrowserUtils.CONSTANTS.OS)[b.os].toLowerCase().replace(/_/g," ")).replace(/{{osVersion}}/g,b.osVersion))}).fail(function(){a.append(m),console.error("The fallback template was not found, check your path and server setup.")}):a.append(m)}function k(){for(var a=[],b=document.getElementsByTagName("*"),d=0;d<b.length;d++)b[d].hasAttribute("ns-fallback")&&a.push(b[d]);if(a.length)for(var e=c.Utils.BrowserUtils.info(),d=0;d<a.length;d++)h(a[d],e)?i(a[d]):j(a[d],e);else console.warn("You are including the fallback library, but are clearly not instantiating it anywhere. Just remove it.")}if(!c)throw"You must include neosavvy-javascript-core to use the fallback library!";a.Neosavvy=a.Neosavvy||{},a.Neosavvy.Fallback=a.Neosavvy.Fallback||{};var l={DENY_ALL_BROWSERS_BY_DEFAULT:!1,DENY_ALL_OS_BY_DEFAULT:!1},m="<div><label>Your browser is not supported.</label></div>";f(c.Utils.BrowserUtils.CONSTANTS.BROWSER),f(c.Utils.BrowserUtils.CONSTANTS.OS),$(document).ready(k)}(window,angular,Neosavvy.Core);